"use strict"
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n]
i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),$MayUHD=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window
_classCallCheck(this,e),this.mWindow=t,this.initEvents(t)}return _createClass(e,[{key:"initEvents",value:function(e){var t=this
e.addEventListener("message",function(e){var n=e.data.type
"string"==typeof n&&("video.currentTime"===n?void 0!==t._cbVideoCurrentTime&&null!==t._cbVideoCurrentTime&&(t._cbVideoCurrentTime(),t._cbVideoCurrentTime=null):"video.duration"===n||t.trigger(n,e.data))},!1),document.addEventListener("keydown",function(e){return t.trigger(e.type,e)}),document.addEventListener("keyup",function(e){return t.trigger(e.type,e)})}},{key:"addEventListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){console.warn("not funod callback function",e)}
if("string"!=typeof e)throw'parma1 type only "string"'
return void 0===this.listenrs[e]&&(this.listenrs[e]=[]),this.listenrs[e].indexOf(t)<=-1&&this.listenrs[e].push(t),this}},{key:"removeEventListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
if(null!==e){this.listenrs[e].indexOf(t)>=0&&this.listenrs[e].slic}return this}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
if(void 0!==this.listenrs[e]){var n=this.listenrs[e]
if(void 0!==n&&Array.isArray(n)){var i=!0,r=!1,o=void 0
try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){(0,s.value)(Object.assign({},t,{type:e}))}}catch(e){r=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(r)throw o}}}}return this}},{key:"parentTrigger",value:function(e,t){return void 0!==this.mWindow&&void 0!==this.mWindow.parent&&void 0!==this.mWindow.parent.postMessage&&this.mWindow.parent.postMessage({type:e,data:t},"*"),this}},{key:"videoPlay",value:function(e){return this.parentTrigger("video.play",{src:e}),this}},{key:"videoStop",value:function(){this.parentTrigger("video.stop")}},{key:"videoResume",value:function(){this.parentTrigger("video.resume")}},{key:"videoPause",value:function(){this.parentTrigger("video.pause")}},{key:"videoGetCurrentTime",value:function(e){this._cbVideoCurrentTime=e,this.parentTrigger("video.currentTime.get")}},{key:"videoSetCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0
this.parentTrigger("video.currentTime.set",{currentTime:e})}},{key:"videoGetDuration",value:function(e){this.parentTrigger("video.duration")}},{key:"listenrs",get:function(){return void 0!==this.mEventListenerList&&null!==this.mEventListenerList||(this.mEventListenerList={}),this.mEventListenerList}}]),e}()
!function(e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=$MayUHD:window.$MayUHD=new $MayUHD(window)}()
